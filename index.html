<!DOCTYPE html>
<html>
<head>
  <title>NBA Head Coaches</title>
  <style>
  body {
    font-family: Helvetica Neue, Helvetica, sans-serif;
  }

  .domain {
    fill: none;
    stroke: #ccc;
    stroke-width: 1;
    shape-rendering: crispedges;
  }

  .tick text {
    font-weight: bold;
    font-size: 12px;
  }

  .year {
    stroke-width: 3;
    stroke: #eee;
  }
  </style>
  <script src="https://d3js.org/d3.v4.0.0-alpha.35.min.js"></script>
</head>
<body>
<script>
var margin = { top: 50, right: 20, bottom: 0, left: 50 },
    width  = 1400 - margin.left - margin.right,
    height = 1800 - margin.top - margin.bottom

var line = d3.line()

d3.json("/coaching.json", function(err, teams) {

  var x = d3.scaleLinear()
    .domain([1970, 2017])
    .range([0, width])

  var y = d3.scaleBand()
    .domain(teams.map(function(d) { return d[0] }).sort(d3.descending))
    .range([height, 0])

  var xax = d3.axisTop()
    .tickFormat(function(d) { return +d })
    .scale(x)

  var svg = d3.select("#container").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

  var groups = svg.selectAll('.team')
    .data(teams)
  .enter().append('g')
    .attr('class', function(d) { return "team " + d[0] })
    .attr('transform', function(d) { return "translate(0, " + y(d[0]) + ")" })

  groups.append('image')
    .attr('xlink:href', function(d) { return "/logos/" + d[0] + ".svg" })
    .attr('x', -46)
    .attr('width', 42)
    .attr('height', 42)

  var coachgroup = groups.append('g')
    .attr('class', 'coaches')

  var stint = coachgroup.selectAll('g.year')
    .data(function(d) { return d[1] })
  .enter().append('g')
    .attr('class', 'year')
    .attr('transform', function(d) { return "translate(" + x(d.start) + ", 0)"})

  stint.append('line')
    .attr('x1', "0")
    .attr('x2', function(d) { return x(d.finish) })
    .attr('y1', y.bandwidth() / 2 - 8)
    .attr('y2', y.bandwidth() / 2 - 8)

  svg.append('g')
    .attr('class', 'x')
    .attr('transform', 'translate(0, -20)')
    .call(xax)
})
</script>
<div id="container"></div>
</body>
</html>
